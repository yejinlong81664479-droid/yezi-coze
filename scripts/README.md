# 自动内容生成脚本

这个脚本用于自动生成测试内容，包括5个不同主题的PPT和5个不同主题的漫画。

## 功能

生成的内容包括：

### 5个PPT主题
1. **人工智能发展趋势** - 探讨AI技术的发展历程、应用场景和未来趋势
2. **气候变化与可持续发展** - 分析气候变化现状及应对策略
3. **数字化转型与企业创新** - 讲解企业数字化转型的方法和实践
4. **太空探索与人类未来** - 回顾太空探索历史，展望未来发展
5. **智慧城市建设** - 阐述智慧城市的概念和应用场景

### 5个漫画故事主题
1. **机器人小明的一天** - 一个机器人在智能工厂的日常生活
2. **小熊的冒险之旅** - 小熊寻找蜂蜜森林的冒险故事
3. **月球基地的守护者** - 2050年月球基地工程师的危机处理
4. **猫咪侦探的破案故事** - 奥斯卡猫咪侦探破获珠宝失窃案
5. **时间旅行者的奇遇** - 科学家李明穿越古今的奇妙经历

## 使用方法

### 前置条件
确保Next.js开发服务器正在运行：

```bash
pnpm dev
```

### 运行脚本

#### 前台运行
```bash
pnpm generate
```

或直接使用tsx：

```bash
npx tsx scripts/generate-content.ts
```

#### 后台运行（推荐）
由于生成过程需要较长时间，建议在后台运行：

```bash
nohup pnpm generate > /tmp/generate.log 2>&1 &
```

查看日志：

```bash
tail -f /tmp/generate.log
```

### 监控生成进度

#### 查看当前进度（一次性）
```bash
pnpm tsx scripts/monitor-progress.ts
```

#### 持续监控（每30秒刷新）
```bash
pnpm tsx scripts/monitor-progress.ts --watch
```

按 Ctrl+C 停止监控。

## 执行流程

1. **PPT生成阶段**
   - 依次生成5个不同主题的PPT
   - 每个PPT包含5页内容
   - 每个PPT之间间隔10秒，避免API限流

2. **漫画生成阶段**
   - 依次生成5个不同主题的漫画
   - 每个漫画包含5个分镜场景
   - 采用SSE流式输出，实时显示进度
   - 每个漫画之间间隔15秒，避免API限流

## 预计执行时间

- **PPT生成**: 约5-8分钟（每个PPT约1-1.5分钟）
- **漫画生成**: 约10-15分钟（每个漫画约2-3分钟）
- **总计**: 约15-25分钟

## 输出信息

脚本运行时会显示：

- 当前正在生成的内容（PPT或漫画）
- 主题/故事名称
- 实时进度状态
- 生成结果（ID、图片数量等）
- 错误信息（如果发生）

## 查看结果

生成完成后，访问 http://localhost:5000 可以在"历史作品"中查看所有生成的PPT和漫画。

## 自定义内容

如需修改生成的内容，可以编辑 `scripts/generate-content.ts` 文件中的 `pptTopics` 和 `comicStories` 数组。

### 添加新主题

**PPT主题示例：**
```typescript
const pptTopics = [
  // ... 现有主题
  {
    topic: "新主题名称",
    description: "详细的主题描述内容",
  },
]
```

**漫画故事示例：**
```typescript
const comicStories = [
  // ... 现有故事
  {
    title: "新故事标题",
    story: "完整的故事内容描述...",
  },
]
```

## 注意事项

1. 确保开发服务器正在运行（端口5000）
2. 生成过程需要较长时间，请耐心等待
3. 脚本已内置延迟机制，避免API调用过于频繁
4. 如遇网络问题或API限流，可适当增加延迟时间
5. 生成的内容会保存在数据库中，可通过网页查看

## 故障排除

### 问题：无法连接到服务器
**解决**：确保 `pnpm dev` 正在运行，且服务在5000端口

### 问题：生成失败
**解决**：检查API接口是否正常，查看控制台错误信息

### 问题：生成速度慢
**解决**：这是正常现象，需要等待AI模型生成内容，请耐心等待
